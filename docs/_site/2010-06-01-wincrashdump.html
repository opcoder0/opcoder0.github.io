<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=" media="screen" type="text/css">
    <link rel="stylesheet" href="/assets/css/print.css" media="print" type="text/css">

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Opcoder0 Blog Posts | Technical Articles and Blog Posts</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Opcoder0 Blog Posts" />
<meta name="author" content="opcoder0" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Technical Articles and Blog Posts" />
<meta property="og:description" content="Technical Articles and Blog Posts" />
<link rel="canonical" href="http://localhost:4000/2010-06-01-wincrashdump.html" />
<meta property="og:url" content="http://localhost:4000/2010-06-01-wincrashdump.html" />
<meta property="og:site_name" content="Opcoder0 Blog Posts" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Opcoder0 Blog Posts" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"opcoder0"},"description":"Technical Articles and Blog Posts","headline":"Opcoder0 Blog Posts","url":"http://localhost:4000/2010-06-01-wincrashdump.html"}</script>
<!-- End Jekyll SEO tag -->


    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>

  <body>
    <header>
      <div class="inner">
        <a href="http://localhost:4000/">
          <h1>Opcoder0 Blog Posts</h1>
        </a>
        <h2>Technical Articles and Blog Posts</h2>
        
        
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h2 id="enable-process-dump-in-windows">Enable Process Dump In Windows</h2>

<p>It is hard to believe how complex enabling user-dump can get in Windows !! And there are different procedures on every different version of Windows ! I don’t understand Windows internals that well. But I wonder what makes it that difficult to keep it consistent across their own OS kernels. Gives one more reason (as a developer) to not like Windows. And there are different tools, procedures, scattered knowledge base articles to illustrate the steps.</p>

<p>Using a tool named <code class="language-plaintext highlighter-rouge">userdump</code> and this can be used to generate user dump on the following Windows OSes –</p>

<ul>
  <li>Microsoft Windows Server 2003, Standard x64 Edition</li>
  <li>Microsoft Windows Server 2003, Enterprise x64 Edition</li>
  <li>Microsoft Windows Server 2003, Standard Edition (32-bit x86)</li>
  <li>Microsoft Windows Server 2003, Enterprise Edition (32-bit x86)</li>
  <li>Microsoft Windows XP Professional x64 Edition</li>
  <li>Microsoft Windows XP Professional</li>
  <li>Microsoft Windows XP Home Edition</li>
  <li>Microsoft Windows 2000 Service Pack 1</li>
  <li>Microsoft Windows 2000 Service Pack 2</li>
  <li>Microsoft Windows 2000 Advanced Server</li>
</ul>

<p>A sample of using userdump – (@See more here http://support.microsoft.com/kb/250509)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\&gt; userdump 1188 c:\store.dmp
</code></pre></div></div>

<p>Now this is different for Windows Vista and Windows 7 and  for these OS flavors, you open task manager, right-click on the process and click on “Create dump file” option. And if you have process that hangs or crashes you can use <code class="language-plaintext highlighter-rouge">Adplus</code> tool. The same procedure is applicable to all sorts of Windows 2008 editions. Adplus is a vbscript a utility written around CDB. This can run in two modes –</p>

<ul>
  <li>Hang mode – to detect process hangs and create user dump</li>
  <li>Crash mode – to detect process crashes and create user dump</li>
</ul>

<p>For example to create a user dump using adplus run the following command –</p>

<p>For a process that crashes –</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\&gt; adplus -crash -p &lt;PID&gt;
</code></pre></div></div>

<p>For the process that hangs –</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:\&gt; adplus -hang -p &lt;PID&gt;
</code></pre></div></div>

<p>Here is a decent link I found that records a lot of these options – <a href="http://support.microsoft.com/kb/286350/">http://support.microsoft.com/kb/286350/</a></p>

<p>And then there is “Debug diagnostic 1.1” that is used to debug high performance applications that crashes, hangs etc. <a href="http://support.microsoft.com/kb/931370">http://support.microsoft.com/kb/931370</a></p>

<p>And then there is generating a Kernel dump. Luckily there is just one way to generate kernel dump on most of the Windows OSes; Details on how to is here <a href="http://support.microsoft.com/kb/254649">http://support.microsoft.com/kb/254649</a>; There is a hotfix from Microsoft that allows user to generate memory dump via a keystroke – <a href="http://support.microsoft.com/kb/244139">http://support.microsoft.com/kb/244139</a></p>

<p>Here are some reference links</p>

<ul>
  <li><a href="http://www.carnal0wnage.com/papers/userinfouserdump.pdf">http://www.carnal0wnage.com/papers/userinfouserdump.pdf</a></li>
  <li><a href="http://www.hammerofgod.com">http://www.hammerofgod.com</a></li>
</ul>

<p>Now what about production systems where you wouldn’t want to install any such tools but still want to get a user-dump file. This is still a question to me and am looking for an answer. So if any of you windows gurus are here do tell me how.</p>

	  <hr/>
        </section>

        <aside id="sidebar">
          

          
	  <nav>
    <br/><br/><br/>
    
    <a href="/"  class="inactive" > Home </a><br/>
    
    <a href="/about.html"  class="inactive" > About </a><br/>
    
    <a href="/post.html"  class="inactive" > Blogs </a><br/>
    
</nav>

        </aside>
      </div>
    </div>

  </body>
</html>
